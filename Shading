#include <Arduino.h>
#include <Shading.h>
#define MOTOR_DIR_CW    0
#define MOTOR_DIR_CCW   1

#define MOTOR_ENABLE    1
#define MOTOR_DISABLE   0
#define LimitA  8
#define LimitB  9
#define Pull    7
#define Dir     6
#define EN      5

void setup() {
  Serial.begin(9600);
    pinMode(LimitA, INPUT_PULLUP);
    shading_motor_init(Pull, Dir, EN);
}

void loop() {
  if (!digitalRead(LimitA)) {
    shading_motor_set(MOTOR_DIR_CW, MOTOR_DISABLE, EN, Dir);
    while(!digitalRead(LimitA));
  }
  shading_motor_set(MOTOR_DIR_CW, Dir, MOTOR_ENABLE, EN);
    for (uint8_t x=0;x<250;x++)
        shading_motor_step(Pull, 1);

  delay(500);
  if (!digitalRead(LimitA)) {
    shading_motor_set(MOTOR_DIR_CW, Dir, MOTOR_DISABLE, EN);
    while(!digitalRead(LimitA));
  }
  shading_motor_set(MOTOR_DIR_CCW, Dir, MOTOR_DISABLE, EN);
    for (uint8_t x=0;x<250;x++)
        shading_motor_step(Pull, 1);
  delay(500);
}
